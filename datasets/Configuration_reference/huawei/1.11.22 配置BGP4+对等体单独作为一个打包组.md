```markdown
# 1.11.22 配置 BGP4+ 对等体单独作为一个打包组

通过配置 BGP4+ 对等体单独作为一个打包组，可以解决路由回发浪费的问题。

## 应用环境

BGP 按组打包技术将所有拥有共同配置的 BGP 邻居当作是一个打包组。这样每条待发送路由只被打包一次然后发给组内的所有邻居，使打包效率指数级提升。但是可能会出现从某一对等体学习的路由会再发送回该对等体的情况，如从 EBGP 邻居学习的优选路由会回发给该 EBGP 邻居或反射器上从客户机学习的优选路由会再次反射给该客户机，会造成报文被丢弃，从而浪费网络资源。

配置将某个指定的对等体作为一个独立的打包组，从该对等体学习到的路由不会再回发给该对等体，从而解决了路由回发浪费的问题。

## 说明

配置 BGP 对等体单独作为一个打包组功能适用于多种地址族下的邻居场景，本章以 IPv6 单播地址族为例，其他支持的地址族请参见 `peer update-group-independent` 页面。

## 前置任务

在配置 BGP4+ 对等体单独作为一个打包组之前，需完成以下任务：

- 配置 BGP4+ 的基本功能操作步骤

## 操作步骤

1. 执行命令 `system-view`，进入系统视图。
2. 执行命令 `bgp as-number`，进入 BGP 视图。
3. 执行命令 `ipv6-family unicast`，进入 IPv6 单播地址族视图。
4. BGP 对等体单独作为一个打包组：

    **说明**：对等体级别和对等体组级别的该配置遵从个体优先的原则，即对等体上的配置优先级高于对等体组上的配置。

    - 执行命令 `peer { ipv4-address | ipv6-address } update-group-independent enable`，使能对等体单独作为一个打包组的能力。
    - 执行命令 `peer group-name update-group-independent`，使能对等体组中每个 Peer 单独作为一个打包组的能力。

5. 执行命令 `commit`，提交配置。

## 检查配置结果

完成配置后，可以按以下指导来检查配置结果：

- 使用 `display bgp ipv6 update-peer-group` 命令查看打包组相关信息。
```