```markdown
# 1.13.5 配置路由属性集合

路由属性集合可以应用在过滤策略中，对具有相同或相似的属性的路由进行过滤。

## 应用环境

在需要对具有相同或相似的路由属性进行过滤时，可以配置相应的路由属性集合。路由属性集合可以应用在过滤策略中对路由进行过滤。NE40E支持如下几种路由属性集合：

- **IPv4地址前缀集合**：适用于各动态路由协议，用来匹配路由的源地址、目的地址和下一跳。
- **IPv6地址前缀集合**：适用于各动态路由协议，用来匹配路由的源地址、目的地址和下一跳。
- **AS_Path集合**：适用于BGP协议，用来匹配BGP路由的AS路径属性。
- **团体属性集合**：适用于BGP协议，用来匹配BGP路由的团体属性。
- **RD属性集合**：适用于VPN路由，用来匹配VPN路由的RD属性值。
- **扩展团体属性（Route-Target）集合**：适用于VPN路由，用来匹配VPN路由的RT属性值。
- **扩展团体属性（Site-of-Origin）集合**：适用于VPN路由，用来匹配VPN路由的SoO属性值。

### 说明

集合不包括传统列表配置中的“接受”和“拒绝”的概念，仅仅是数据的容器，策略动作完全由用户通过过滤策略指定。

可以配置一个空的，即没有任何集合元素的路由属性集合。

过滤策略中可直接引用 `{ 元素, 元素, ... }` 形式配置的路由属性集合，如 `if ip route-source in{ 1.1.1.0 24, 2.2.2.2 32 } then`，这种配置方式比较简便，但某个集合在策略中多次应用时还是建议配置定义名称的集合。用户可根据实际情况选择合适的方式。

## 前置任务

在配置路由属性集合之前，需完成以下任务：

- 根据要过滤的路由的特征，选择合适的路由属性集合。
- 如果存在使用频率高的数值，可以通过配置全局变量集合简化配置。

下面详细介绍路由属性集合的配置过程。

### 1.13.5.1 配置IPv4地址前缀集合

IPv4地址前缀集合适用于各动态路由协议，用来匹配路由的源地址、目的地址和下一跳。

#### 操作步骤

- **用段编辑方式配置IPv4地址前缀集合**：
  1. 执行命令 `edit xpl ip-prefix-list ip-prefix-list-name`，进入IPv4地址前缀集合的段编辑视图。
  2. 执行快捷键 `i`，进入文本编辑模式。
  
  **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。
  
  3. 在IPv4地址前缀集合段编辑视图中，配置IPv4地址前缀集合的起始语句：`xpl ip-prefix-list ip-prefix-list-name`。
  4. 在IPv4地址前缀集合段编辑视图中，配置集合元素，集合元素为带掩码长度的IPv4地址，如 `1.1.1.0 24`，元素之间用 `,` 隔开。掩码长度可以与 `eq`、`ge`、`le` 配合使用。
  5. 在IPv4地址前缀集合段编辑视图中，配置IPv4地址前缀集合的结束语句：`end-list`。
  6. 执行快捷键 `Esc`，退出文本编辑模式。
  7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。
  
  **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

- **用行编辑方式配置IPv4地址前缀集合**：
  1. 执行命令 `system-view`，进入系统视图。
  2. 执行命令 `xpl ip-prefix-list ip-prefix-list-name`，进入IPv4地址前缀集合视图。
  3. 配置集合元素，集合元素为带掩码长度的IPv4地址，如 `1.1.1.0 24`，元素之间用 `,` 隔开。掩码长度可以与 `eq`、`ge`、`le` 配合使用。
  4. 执行命令 `end-list`，结束IPv4地址前缀集合的配置，并退出IPv4地址前缀集合视图，重新回到系统视图。
  5. 执行命令 `commit`，提交配置。

#### 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考1.13.9 XPL段编辑语句。

**目的**：配置一个IPv4地址前缀集合，精确匹配路由 `1.1.1.0/24`、`2.2.2.0/24` 和 `3.3.3.3/32`。

**配置实例**：
```bash
<HUAWEI> edit xpl ip-prefix-list aaa
xpl ip-prefix-list aaa
1.1.1.0 24,
2.2.2.0 24,
3.3.3.3 32
end-list
```
配置实例1中的IPv4地址前缀集合有三个元素，可以精确匹配路由 `1.1.1.0/24`、`2.2.2.0/24` 和 `3.3.3.3/32`。

**目的**：配置一个IPv4地址前缀集合，匹配 `1.1.1.0/24` 网段内掩码长度在26和30之间的路由、`2.2.2.0/24` 网段内掩码长度大于等于28的路由和 `3.3.3.0/24` 网段内掩码长度等于30的路由。

**配置实例**：
```bash
<HUAWEI> edit xpl ip-prefix-list bbb
xpl ip-prefix-list bbb
1.1.1.0 24 ge 26 le 30,
2.2.2.0 24 ge 28,
3.3.3.0 24 eq 30
end-list
```
配置实例2中的IPv4地址前缀集合有三个元素，可以匹配 `1.1.1.0/24` 网段内掩码长度在26和30之间的路由、`2.2.2.0/24` 网段内掩码长度大于等于28的路由和 `3.3.3.0/24` 网段内掩码长度等于30的路由。

**目的**：配置一个过滤策略，为能够匹配集合 `bbb` 的路由设置MED值60，为不能匹配集合 `bbb` 但能匹配集合 `aaa` 的路由设置MED值70，为余下的所有路由设置MED值80。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if ip route-destination in bbb then
  apply med 60
elseif ip route-destination in aaa then
  apply med 70
else
  apply med 80
endif
end-filter
```
此过滤策略引用了 `aaa` 和 `bbb` 两个IPv4目的地址前缀集合，为能够匹配集合 `bbb` 的路由设置MED值60，为不能匹配集合 `bbb` 但能匹配集合 `aaa` 的路由设置MED值70，为余下的所有路由设置MED值80。

### 1.13.5.2 配置IPv6地址前缀集合

IPv6地址前缀集合适用于各动态路由协议，用来匹配路由的源地址、目的地址和下一跳。

#### 操作步骤

- **用段编辑方式配置IPv6地址前缀集合**：
  1. 执行命令 `edit xpl ipv6-prefix-list ipv6-prefix-list-name`，进入IPv6地址前缀集合的段编辑视图。
  2. 执行快捷键 `i`，进入文本编辑模式。
  
  **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。
  
  3. 在IPv6地址前缀集合段编辑视图中，配置IPv6地址前缀集合的起始语句：`xpl ipv6-prefix-list ipv6-prefix-list-name`。
  4. 在IPv6地址前缀集合段编辑视图中，配置集合元素，集合元素为带掩码长度的IPv6地址，如 `2001:db8:0:1:: 64`，元素之间用 `,` 隔开。掩码长度可以与 `eq`、`ge`、`le` 配合使用。
  5. 在IPv6地址前缀集合段编辑视图中，配置IPv6地址前缀集合的结束语句：`end-list`。
  6. 执行快捷键 `Esc`，退出文本编辑模式。
  7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。
  
  **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

- **用行编辑方式配置IPv6地址前缀集合**：
  1. 执行命令 `system-view`，进入系统视图。
  2. 执行命令 `xpl ipv6-prefix-list ipv6-prefix-list-name`，进入IPv6地址前缀集合视图。
  3. 配置集合元素，集合元素为带掩码长度的IPv6地址，如 `2001:db8:0:1:: 64`，元素之间用 `,` 隔开。掩码长度可以与 `eq`、`ge`、`le` 配合使用。
  4. 执行命令 `end-list`，结束IPv6地址前缀集合的配置，并退出IPv6地址前缀集合视图，重新回到系统视图。
  5. 执行命令 `commit`，提交配置。

#### 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考1.13.9 XPL段编辑语句。

**目的**：配置一个IPv6地址前缀集合，精确匹配路由 `2001:db8:0:1::/64`、`2001:db8:1:1::/64` 和 `2001:db8:1:2::/64`。

**配置实例**：
```bash
<HUAWEI> edit xpl ipv6-prefix-list aaa
xpl ipv6-prefix-list aaa
2001:db8:0:1:: 64,
2001:db8:1:1:: 64,
2001:db8:1:2:: 64
end-list
```
配置实例1中的IPv6地址前缀集合有三个元素，可以精确匹配路由 `2001:db8:0:1::/64`、`2001:db8:1:1::/64` 和 `2001:db8:1:2::/64`。

**目的**：配置一个IPv6地址前缀集合，匹配 `2001:db8:0:1::/64` 网段内掩码长度在96和100之间的路由、`2001:db8:1:1::/64` 网段内掩码长度小于100的路由和 `2001:db8:1:2::/64` 网段内掩码长度等于96的路由。

**配置实例**：
```bash
<HUAWEI> edit xpl ipv6-prefix-list bbb
xpl ipv6-prefix-list bbb
2001:db8:0:1:: 64 ge 96 le 100,
2001:db8:1:1:: 64 le 100,
2001:db8:1:2:: 64 eq 96
end-list
```
配置实例2中的IPv6地址前缀集合有三个元素，可以匹配 `2001:db8:0:1::/64` 网段内掩码长度在96和100之间的路由、`2001:db8:1:1::/64` 网段内掩码长度小于100的路由和 `2001:db8:1:2::/64` 网段内掩码长度等于96的路由。

**目的**：配置一个过滤策略，不接收能够匹配集合 `bbb` 的路由和既不匹配集合 `aaa` 也不匹配集合 `bbb` 的路由，不能匹配集合 `bbb` 但能匹配集合 `aaa` 的路由允许通过该过滤策略并设置MED值在原基础上增加10。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if ip route-destination in bbb then
  refuse
elseif ip route-destination in aaa then
  apply med +10
else
  refuse
endif
end-filter
```
此过滤策略引用了 `aaa` 和 `bbb` 两个IPv6目的地址前缀集合，能够匹配集合 `bbb` 的路由不允许通过该过滤策略，不能匹配集合 `bbb` 但能匹配集合 `aaa` 的路由允许通过该过滤策略并设置MED值在原基础上增加10，余下的路由不允许通过过滤策略。

### 1.13.5.3 配置AS_Path集合

AS_Path集合适用于BGP协议，用来匹配BGP路由的AS_Path属性。

#### 操作步骤

- **用段编辑方式配置AS_Path集合**：
  1. 执行命令 `edit xpl as-path-list as-path-list-name`，进入AS_Path集合的段编辑视图。
  2. 执行快捷键 `i`，进入文本编辑模式。
  
  **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。
  
  3. 在AS_Path集合段编辑视图中，配置AS_Path集合的起始语句：`xpl as-path-list as-path-list-name`。
  4. 在AS_Path集合段编辑视图中，配置集合元素，集合元素为 `regular+` 正则表达式形式的AS_Path，如 `regular 1_2_3_4` 代表AS_Path中含有1、2、3、4四个AS号的AS_Path列表，元素之间用 `,` 隔开。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  5. 在AS_Path集合段编辑视图中，配置AS_Path集合的结束语句：`end-list`。
  6. 执行快捷键 `Esc`，退出文本编辑模式。
  7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。
  
  **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

- **用行编辑方式配置AS_Path集合**：
  1. 执行命令 `system-view`，进入系统视图。
  2. 执行命令 `xpl as-path-list as-path-list-name`，进入AS_Path集合视图。
  3. 配置集合元素，集合元素为 `regular+` 正则表达式形式的AS_Path，如 `regular 1_2_3_4` 代表AS_Path中含有1、2、3、4四个AS号的AS_Path列表，元素之间用 `,` 隔开。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  4. 执行命令 `end-list`，结束AS_Path集合的配置，并退出AS_Path集合视图，重新回到系统视图。
  5. 执行命令 `commit`，提交配置。

#### 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考1.13.9 XPL段编辑语句。

**目的**：配置一个AS_Path集合，匹配AS 100发送来的路由、经过AS_200的路由和AS 300始发的路由。

**配置实例**：
```bash
<HUAWEI> edit xpl as-path-list aaa
xpl as-path-list aaa
regular ^100_,
regular _200_,
regular _300$
end-list
```
配置实例中的AS_Path集合有三个元素，可以匹配AS 100发送来的路由、经过AS_200的路由和AS 300始发的路由。

**目的**：配置一个过滤策略，不接收AS 100发送来的路由、经过AS_200的路由和AS 300始发的路由。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if as-path in aaa then
  refuse
else
  approve
endif
end-filter
```
此过滤策略引用了 `aaa` 集合，能够匹配集合 `aaa` 的路由不允许通过该过滤策略，余下的路由允许通过过滤策略。

### 1.13.5.4 配置团体属性集合

团体属性集合适用于BGP协议，用来匹配BGP路由的团体属性。

#### 操作步骤

- **用段编辑方式配置团体属性集合**：
  1. 执行命令 `edit xpl community-list community-list-name`，进入团体属性集合的段编辑视图。
  2. 执行快捷键 `i`，进入文本编辑模式。
  
  **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。
  
  3. 在团体属性集合段编辑视图中，配置团体属性集合的起始语句：`xpl community-list community-list-name`。
  4. 在团体属性集合段编辑视图中，配置集合元素，集合元素为 `aa:nn`、团体号或知名团体属性（`internet`、`no-export-subconfed`、`no-advertise` 或 `no-export`），如 `100:1`，元素之间用 `,` 隔开。也可以使用 `regular regular-expression` 格式，表示路由的团体属性符合指定正则表达式，`regular-expression` 为正则表达式，元素中可以使用 `*` 代表任意匹配，如 `100:*`，表示所有团体属性中自治系统AS编号为100的团体属性。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  5. 在团体属性集合段编辑视图中，配置团体属性集合的结束语句：`end-list`。
  6. 执行快捷键 `Esc`，退出文本编辑模式。
  7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。
  
  **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

- **用行编辑方式配置团体属性集合**：
  1. 执行命令 `system-view`，进入系统视图。
  2. 执行命令 `xpl community-list community-list-name`，进入团体属性集合视图。
  3. 配置集合元素，集合元素为 `aa:nn`、团体号或知名团体属性（`internet`、`no-export-subconfed`、`no-advertise` 或 `no-export`），如 `100:1`，元素之间用 `,` 隔开。也可以使用 `regular regular-expression` 格式，表示路由的团体属性符合指定正则表达式，`regular-expression` 为正则表达式，元素中可以使用 `*` 代表任意匹配，如 `100:*`，表示所有团体属性中自治系统AS编号为100的团体属性。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  4. 执行命令 `end-list`，结束团体属性集合的配置，并退出团体属性集合视图，重新回到系统视图。
  5. 执行命令 `commit`，提交配置。

#### 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考1.13.9 XPL段编辑语句。

**目的**：配置一个团体属性集合，匹配团体属性 `100:1`、`200:1`、`300:1` 和 `no-export`。

**配置实例**：
```bash
<HUAWEI> edit xpl community-list aaa
xpl community-list aaa
100:1,
200:1,
300:1,
no-export
end-list
```
配置实例1中的团体属性集合有四个元素，可以匹配团体属性 `100:1`、`200:1`、`300:1` 和 `no-export`。

**目的**：配置一个团体属性集合，匹配团体属性 `100:*`、`200:*` 和 `300:1`。

**配置实例**：
```bash
<HUAWEI> edit xpl community-list bbb
xpl community-list bbb
regular 100:*,
regular 200:*,
300:1
end-list
```
配置实例2中的团体属性集合有三个元素，可以匹配团体属性 `100:*`、`200:*` 和 `300:1`。

**目的**：配置一个过滤策略，为 `Local-Pref` 小于等于100的路由追加团体属性 `100:1`、`200:1`、`300:1` 和 `no-export`。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if local-preference le 100 then
  apply community aaa additive
endif
end-filter
```
应用实例1的过滤策略在动作语句中引用了 `aaa` 集合，能够为 `Local-Pref` 小于等于100的路由追加团体属性 `100:1`、`200:1`、`300:1` 和 `no-export`。

**目的**：配置一个过滤策略，为团体属性是集合 `bbb` 的子集的路由设置下一跳地址为 `1.1.1.1`。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if community matches-within bbb then
  apply ip next-hop 1.1.1.1
endif
end-filter
```
应用实例2的过滤策略引用了 `bbb` 集合，能够为团体属性是集合 `bbb` 的子集的路由设置下一跳地址为 `1.1.1.1`。

### 1.13.5.5 配置Large-community属性集合

Large-community属性集合适用于BGP协议，用来匹配BGP路由的Large-community属性。

#### 操作步骤

- **用段编辑方式配置Large-community属性集合**：
  1. 执行命令 `edit xpl large-community-list large-community-list-name`，进入Large-community属性集合的段编辑视图。
  2. 执行快捷键 `i`，进入文本编辑模式。
  
  **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。
  
  3. 在Large-community属性集合段编辑视图中，配置Large-community属性集合的起始语句：`xpl large-community-list large-community-list-name`。
  4. 在Large-community属性集合段编辑视图中，配置集合元素，集合元素为 `aa:bb:cc`，如 `100:1:1`，元素之间用 `,` 隔开。也可以使用 `regular regular-expression` 格式，表示路由的Large-community属性符合指定正则表达式，`regular-expression` 为正则表达式，元素中可以使用 `*` 代表任意匹配，如 `100:1:*`。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  5. 在Large-community属性集合段编辑视图中，配置Large-community属性集合的结束语句：`end-list`。
  6. 执行快捷键 `Esc`，退出文本编辑模式。
  7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。
  
  **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

- **用行编辑方式配置Large-community属性集合**：
  1. 执行命令 `system-view`，进入系统视图。
  2. 执行命令 `xpl large-community-list large-community-list-name`，进入Large-community属性集合视图。
  3. 配置集合元素，集合元素为 `aa:bb:cc`，如 `100:1:1`，元素之间用 `,` 隔开。也可以使用 `regular regular-expression` 格式，表示路由的Large-community属性符合指定正则表达式，`regular-expression` 为正则表达式，元素中可以使用 `*` 代表任意匹配，如 `100:1:*`。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  4. 执行命令 `end-list`，结束Large-community属性集合的配置，并退出Large-community属性集合视图，重新回到系统视图。
  5. 执行命令 `commit`，提交配置。

#### 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考1.13.9 XPL段编辑语句。

**目的**：配置一个Large-community属性集合，匹配Large-community属性 `100:1:1`、`200:1:1` 和 `300:1:1`。

**配置实例**：
```bash
<HUAWEI> edit xpl large-community-list aaa
xpl large-community-list aaa
100:1:1,
200:1:1,
300:1:1
end-list
```
配置实例1中的Large-community属性集合有三个元素，可以匹配Large-community属性 `100:1:1`、`200:1:1` 和 `300:1:1`。

**目的**：配置一个Large-community属性集合，匹配Large-community属性 `100:1:*`、`200:1:*` 和 `300:1:1`。

**配置实例**：
```bash
<HUAWEI> edit xpl large-community-list bbb
xpl large-community-list bbb
regular 100:1:*,
regular 200:1:*,
300:1:1
end-list
```
配置实例2中的Large-community属性集合有三个元素，可以匹配Large-community属性 `100:1:*`、`200:1:*` 和 `300:1:1`。

**目的**：配置一个过滤策略，为 `Local-Pref` 小于等于100的路由追加Large-community属性 `100:1:1`、`200:1:1` 和 `300:1:1`。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if local-preference le 100 then
  apply large-community aaa additive
endif
end-filter
```
引用实例1的过滤策略在动作语句中引用了 `aaa` 集合，能够为 `Local-Pref` 小于等于100的路由追加Large-community属性 `100:1:1`、`200:1:1` 和 `300:1:1`。

**目的**：配置一个过滤策略，为Large-community属性是集合 `bbb` 的子集的路由设置下一跳地址为 `1.1.1.1`。

**引用实例**：
```bash
<HUAWEI> edit xpl route-filter r
xpl route-filter r
if large-community matches-within bbb then
  apply ip next-hop 1.1.1.1
endif
end-filter
```
引用实例2的过滤策略引用了 `bbb` 集合，能够为Large-community属性是集合 `bbb` 的子集的路由设置下一跳地址为 `1.1.1.1`。

### 1.13.5.6 配置RD属性集合

RD属性集合适用于VPN路由，用来匹配VPN路由的RD属性值。

#### 操作步骤

- **用段编辑方式配置RD属性集合**：
  1. 执行命令 `edit xpl rd-list rd-list-name`，进入RD属性集合的段编辑视图。
  2. 执行快捷键 `i`，进入文本编辑模式。
  
  **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。
  
  3. 在RD属性集合段编辑视图中，配置RD属性集合的起始语句：`xpl rd-list rd-list-name`。
  4. 在RD属性集合段编辑视图中，配置集合元素，集合元素为VPN路由的RD值，有如下几种格式，元素之间用 `,` 隔开：
    - **16位自治系统号:32位用户自定义数**，例如：`101:3`。自治系统号的取值范围是0～65535；用户自定义数的取值范围是0～4294967295。
    - **32位IP地址:16位用户自定义数**，例如：`192.168.122.15:1`。IP地址的取值范围是0.0.0.0～255.255.255.255；用户自定义数的取值范围是0～65535。
    - **整数形式4字节自治系统号:2字节用户自定义数**，自治系统号的取值范围是65536～4294967295，用户自定义数的取值范围是0～65535，例如 `65537:3`。
    - **点分形式4字节自治系统号:2字节用户自定义数**，点分形式自治系统号通常写成 `x.y` 的形式，`x` 和 `y` 的取值范围都是0～65535，用户自定义数的取值范围是0～65535，例如 `0.0:3` 或者 `0.1:0`。
    - **regular regular-expression**：RD属性符合指定正则表达式的VPN路由，`regular-expression` 为正则表达式。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  5. 在RD属性集合段编辑视图中，配置RD属性集合的结束语句：`end-list`。
  6. 执行快捷键 `Esc`，退出文本编辑模式。
  7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。
  
  **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

- **用行编辑方式配置RD属性集合**：
  1. 执行命令 `system-view`，进入系统视图。
  2. 执行命令 `xpl rd-list rd-list-name`，进入RD属性集合视图。
  3. 配置集合元素，集合元素为VPN路由的RD值，有如下几种格式，元素之间用 `,` 隔开：
    - **16位自治系统号:32位用户自定义数**，例如：`101:3`。自治系统号的取值范围是0～65535；用户自定义数的取值范围是0～4294967295。
    - **32位IP地址:16位用户自定义数**，例如：`192.168.122.15:1`。IP地址的取值范围是0.0.0.0～255.255.255.255；用户自定义数的取值范围是0～65535。
    - **整数形式4字节自治系统号:2字节用户自定义数**，自治系统号的取值范围是65536～4294967295，用户自定义数的取值范围是0～65535，例如 `65537:3`。
    - **点分形式4字节自治系统号:2字节用户自定义数**，点分形式自治系统号通常写成 `x.y` 的形式，`x` 和 `y` 的取值范围都是0～65535，用户自定义数的取值范围是0～65535，例如 `0.0:3` 或者 `0.1:0`。
    - **regular regular-expression**：RD属性符合指定正则表达式的VPN路由，`regular-expression` 为正则表达式。
  
  **说明**：正则表达式匹配是CPU运算密集型处理。当XPL策略中配置了大量的正则表达式对BGP路由属性进行匹配且对应的BGP路由属性长度较长时，会导致XPL策略处理性能下降。此时请通过降低正则表达式数量或使用非正则表达式的匹配命令可提升路由策略处理性能。每个策略中配置的正则表达式个数建议不超过100个。
  
  4. 执行命令 `end-list`，结束RD属性集合的配置，并退出RD属性集合视图，重新回到系统视图。
  5. 执行命令 `commit`，提交配置。

#### 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考1.13.9 XPL段编辑语句。

**目的**：配置一个RD属性集合，匹配RD值为 `100:1`、`200:1` 和以300开头的RD值形式为“2字节自治系统号:4字节用户自定义数”的VPN路由。

**配置实例**：
```bash
<HUAWEI> edit xpl rd-list rd-list
xpl rd-list rd-list
100:1,
200:1,
regular 300:*
end-list
```
配置实例中的RD属性集合有三个元素，可以匹配RD