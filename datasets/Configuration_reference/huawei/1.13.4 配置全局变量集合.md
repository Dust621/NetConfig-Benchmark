```markdown
# 1.13.4 配置全局变量集合

对于一台设备上使用频率较高的数值，可以通过定义全局变量集合将这些数值定义为全局变量。全局变量可以被设备中所有过滤策略引用。

## 背景信息说明

全局变量的元素数值在定义过程中无实际意义，根据全局变量的引用过程来判断参数具体的数据类型，在不同的引用过程中可能表示不同的数据类型。

一个设备只允许定义一组全局变量，提交新的全局变量会覆盖当前定义的全局变量。

在过滤策略或集合中引用全局变量的方法为 `$` + 全局变量名称，如 `$globvar`。

## 操作步骤

### 用段编辑方式配置全局变量集合

1. 执行命令 `edit xpl global-value`，进入全局变量集合的段编辑视图。
2. 执行快捷键 `i`，进入文本编辑模式。

   **说明**：只有在文本编辑模式下才可以对集合或策略进行配置，退出文本编辑模式后只能执行快捷键操作。

3. 在全局变量集合段编辑视图中，配置全局变量集合的起始语句：`xpl global-value`。
4. 在全局变量集合段编辑视图中，配置集合元素，集合元素为变量名 + 具体数值，具体数值两端加单引号，如 `aaa '12'`、`bbb '34'`、`aaa '1.2.3.4'`，元素之间用 `,` 隔开。
5. 在全局变量集合段编辑视图中，配置全局变量集合的结束语句：`end-global-value`。
6. 执行快捷键 `Esc`，退出文本编辑模式。
7. 执行快捷键 `:wq`，并按回车键，保存配置并退出段编辑视图。

   **说明**：在退出段编辑视图时会提示是否要提交配置，请在这时按 `Y` 提交配置。如不需要保存在段编辑视图中的配置，请将此步骤中的快捷键换成 `:q!`，并按回车键。

### 用行编辑方式配置全局变量集合

1. 执行命令 `system-view`，进入系统视图。
2. 执行命令 `xpl global-value`，进入全局变量集合视图。
3. 配置集合元素，集合元素为变量名 + 具体数值，具体数值两端加单引号，如 `aaa '12'`、`bbb '34'`、`aaa '1.2.3.4'`，元素之间用 `,` 隔开。
4. 执行命令 `end-global-value`，结束全局变量集合的配置。
5. 执行命令 `commit`，提交配置。

---

## 任务示例说明

示例中使用段编辑进行配置的举例，行编辑的配置与段编辑类似，请在行编辑相应的视图下执行段编辑视图中的配置，不再另行对行编辑进行举例。

集合和过滤策略的配置过程请参考段编辑方式中集合和过滤策略的配置步骤，XPL语句请参考 1.13.9 XPL 段编辑语句。

### 目的

配置一个全局变量集合，需要包含 `100`、`ip-prefix` 两个数值。

### 配置实例

```bash
<HUAWEI> edit xpl global-value
xpl global-value
aaa '100',
bbb 'ip-prefix',
end-global-value
```

此全局变量集合中包含两个元素 `aaa`、`bbb`，数值分别是 `100`、`ip-prefix`。

### 目的

配置一个过滤策略，MED 值小于 100 和在名称为 `bbb` 的 IPv4 地址前缀集合内的路由允许通过此过滤策略，其余路由不允许通过此过滤策略。

### 引用实例

```bash
<HUAWEI> edit xpl ip-prefix-list r
xpl route-filter r
if ip med le $aaa then
    approve
elseif ip route-destination in $bbb then
    approve
else
    refuse
endif
end-filter
```

引用实例是一个过滤策略，此过滤集合引用了 `aaa` 和 `bbb` 两个全局变量，`aaa` 代表路由的 MED 值，`bbb` 代表 IPv4 目的地址前缀集合，即表示 MED 值小于 100 和在名称为 `bbb` 的 IPv4 目的地址前缀集合内的路由允许通过该过滤策略，其余路由不允许通过此过滤策略。
```