```markdown
# 1.6.13 配置 OSPFv3 主机名

通过配置 OSPFv3 主机名功能，可以使用可读性强的名称标识路由器，便于网络规划。

## 应用环境

为了方便网络规划，可以使用主机名来标识设备。用户可以配置动态主机名功能，在本端设备上配置自身的动态主机名，并向网络中发布。学习到该主机名的路由器可以查看到本端设备的 Router ID 与主机名的对应关系。

## 前置任务

在配置 OSPFv3 主机名之前，需完成以下任务：

- 配置接口的网络层地址，使相邻节点之间网络层可达。
- 配置 OSPFv3 的基本功能。

## 操作步骤

1. 执行命令 `system-view`，进入系统视图。
2. 执行命令 `ospfv3 [ process-id ]`，进入 OSPFv3 进程视图。
3. 执行命令 `hostname host-name`，配置 OSPFv3 的动态主机名。

   **说明**：如果配置了 `host-name` 参数，则以 `host-name` 作为动态主机名发布；如果只执行 `hostname` 命令，不配置 `host-name` 参数，则以 `sysname` 命令输入的设备名称作为动态主机名发布。

4. 执行命令 `commit`，提交配置。

## 检查配置结果

使用以下命令可以查看 OSPFv3 的动态主机名信息：

- `display ospfv3 [ process-id ] hostname-table`

# 1.6.14 配置 OSPFv3 的 Stub 区域

通过将位于自治系统边缘的非骨干区域配置成 Stub 区域，不传播来自 OSPFv3 网络其他区域的外部路由和自治系统外部的路由，这样可以避免大量外部路由对路由器带宽和存储资源的消耗，缩减其路由表规模，减少需要传递的路由信息数量。

## 应用环境

OSPFv3 划分区域可以减少网络中 LSA 的数量。对于位于自治系统边界的非骨干区域，为了更多的缩减其路由表规模和降低 LSA 的数量，可以将它们配置为 Stub 区域。

Stub 区域是一种可选的配置属性。通常来说，Stub 区域位于自治系统的边界，例如，只有一个 ABR 的非骨干区域。在这些区域中，路由器的路由表规模以及路由信息传递的数量都会大量减少。

配置 Stub 区域时需要注意以下几点：

- 骨干区域（Area 0）不能配置成 Stub 区域。
- 如果要将一个区域配置成 Stub 区域，则该区域中的所有路由器都要配置 Stub 区域属性。
- Stub 区域内不能存在 ASBR，即自治系统外部的路由不能在 Stub 区域内传播。

## 前置任务

在配置 OSPFv3 的 Stub 区域之前，需完成以下任务：

- 配置接口的网络层地址，使相邻节点之间网络层可达。
- 配置 OSPFv3 的基本功能。

## 操作步骤

1. 执行命令 `system-view`，进入系统视图。
2. 执行命令 `ospfv3 [ process-id ]`，进入 OSPFv3 视图。
3. 执行命令 `area area-id`，进入 OSPFv3 区域视图。
4. 执行命令 `stub`，配置当前区域为 Stub 区域。

   **说明**：
   - 所有连接到 Stub 区域的路由器必须使用 `stub` 命令将该区域配置成 Stub 区域属性。
   - 配置或取消 Stub 属性，可能会触发区域更新。只有在上一次区域更新完成后，才能进行再次配置或取消配置操作。

5. （可选）执行命令 `stub no-summary`，配置禁止 ABR 向 Stub 区域内发送 Type 3 LSA（Summary LSA）。
6. （可选）执行命令 `stub default-route-advertise backbone-peer-ignore`，配置发起默认路由，忽略检查骨干区域的邻居状态。
7. （可选）执行命令 `default-cost cost`，配置发送到 Stub 区域缺省路由的开销。

   当区域配置为 Stub 区域后，为保证到自治系统外的路由可达，Stub 区域的 ABR 将生成一条缺省路由，并发布给 Stub 区域中的其他路由器。

8. 执行命令 `commit`，提交配置。

## 检查配置结果

使用 `display ospfv3 [ process-id ] lsdb` 命令可以看到 LSA 类型、链路状态 ID 等信息。

当路由器所在区域为普通区域时，路由表中会存在 AS 外部的路由。当把路由器所在区域配置为 Stub 区域时，已经看不到 AS 外部的路由。
```