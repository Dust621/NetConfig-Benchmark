{
  "topology": "R1 通过接口 GE0/0/2 与 R2 的 GE0/0/3 相连，使用 IP 地址段 10.0.12.0/24；R2 的 GE0/0/2 与 R3 的 GE0/0/3 相连，使用 IP 地址段 10.0.23.0/24；R3 的 GE0/0/2 与 R4 的 GE0/0/3 相连，使用 IP 地址段 10.0.34.0/24；R4 的 GE0/0/2 与 R5 的 GE0/0/3 相连，使用 IP 地址段 10.0.45.0/24。R1 属于 AS 64513，R2、R3、R4 属于 AS 64512，R5 属于 AS 64514。R2、R3、R4 之间运行 OSPF 协议，OSPF 在它们的互联接口及 Loopback0 接口上激活。所有设备均配置 Loopback0 接口，作为 BGP Router ID，IP 地址格式为 10.0.x.x/32，其中 x 为设备编号。R1 和 R5 上配置有 Loopback1 接口，分别用于模拟用户网段，IP 分别为 10.1.1.1/24 和 10.1.5.5/24。",
  "requirement": "你是公司的网络管理员。公司的网络采用了BGP 协议作为路由协议。公司的网络由多个自治系统组成，不同的分支机构使用了不同的AS 号，现在你需要完成公司网络的搭建工作。在公司总部使用了OSPF 作为IGP，公司内部不同分支机构使用的是私有的BGP AS 号。在完成网络搭建以后，你还需要观察BGP 路由信息的传递。",
  "steps": [
    "设备IP 地址配置。",
    "配置AS 64512 内的OSPF。",
    "配置AS 64512 内的全互联IBGP 对等体关系。",
    "配置AS 64512、AS 64513、AS 64514 之间的EBGP 对等体关系。",
    "在R1、R5 上将Loopback1 接口路由发布到BGP，在R2、R4 上修改BGP 下一跳地址。"
  ],
  "configs": {
    "R1": "sysname R1 \ninterface GigabitEthernet0/0/2 \n ip address 10.0.12.1 255.255.255.0 \ninterface LoopBack0 \n ip address 10.0.1.1 255.255.255.255 \ninterface LoopBack1 \n ip address 10.1.1.1 255.255.255.0 \nbgp 64513 \n router-id 10.0.1.1 \n peer 10.0.2.2 as-number 64512 \n peer 10.0.2.2 ebgp-max-hop 2 \n peer 10.0.2.2 connect-interface LoopBack0 \n ipv4-family unicast \n  undo synchronization \n  network 10.0.1.0 255.255.255.0 \n  network 10.1.1.0 255.255.255.0 \n  peer 10.0.2.2 enable \nip route-static 10.0.2.2 255.255.255.255 10.0.12.2",
    "R2": "sysname R2 \ninterface GigabitEthernet0/0/2 \n ip address 10.0.23.2 255.255.255.0 \ninterface GigabitEthernet0/0/3 \n ip address 10.0.12.2 255.255.255.0 \ninterface LoopBack0 \n ip address 10.0.2.2 255.255.255.255 \nbgp 64512 \n router-id 10.0.2.2 \n peer 10.0.1.1 as-number 64513 \n peer 10.0.1.1 ebgp-max-hop 2 \n peer 10.0.1.1 connect-interface LoopBack0 \n peer 10.0.3.3 as-number 64512 \n peer 10.0.3.3 connect-interface LoopBack0 \n peer 10.0.4.4 as-number 64512 \n peer 10.0.4.4 connect-interface LoopBack0 \n ipv4-family unicast \n  undo synchronization \n  peer 10.0.1.1 enable \n  peer 10.0.3.3 enable \n  peer 10.0.3.3 next-hop-local \n  peer 10.0.4.4 enable \n  peer 10.0.4.4 next-hop-local \nospf 1 router-id 10.0.2.2 \n area 0.0.0.0 \n  network 10.0.2.2 0.0.0.0 \n  network 10.0.23.2 0.0.0.0 \nip route-static 10.0.1.1 255.255.255.255 10.0.12.1",
    "R3": "sysname R3 \ninterface GigabitEthernet0/0/2 \n ip address 10.0.34.3 255.255.255.0 \ninterface GigabitEthernet0/0/3 \n ip address 10.0.23.3 255.255.255.0 \ninterface LoopBack0 \n ip address 10.0.3.3 255.255.255.255 \nbgp 64512 \n router-id 10.0.3.3 \n peer 10.0.2.2 as-number 64512 \n peer 10.0.2.2 connect-interface LoopBack0 \n peer 10.0.4.4 as-number 64512 \n peer 10.0.4.4 connect-interface LoopBack0 \n ipv4-family unicast \n  undo synchronization \n  peer 10.0.2.2 enable \n  peer 10.0.4.4 enable \nospf 1 router-id 10.0.3.3 \n area 0.0.0.0 \n  network 10.0.3.3 0.0.0.0 \n  network 10.0.23.3 0.0.0.0 \n  network 10.0.34.3 0.0.0.0",
    "R4": "sysname R4 \ninterface GigabitEthernet0/0/2 \n ip address 10.0.45.4 255.255.255.0 \ninterface GigabitEthernet0/0/3 \n ip address 10.0.34.4 255.255.255.0 \ninterface LoopBack0 \n ip address 10.0.4.4 255.255.255.255 \nbgp 64512 \n router-id 10.0.4.4 \n peer 10.0.2.2 as-number 64512 \n peer 10.0.2.2 connect-interface LoopBack0 \n peer 10.0.3.3 as-number 64512 \n peer 10.0.3.3 connect-interface LoopBack0 \n peer 10.0.5.5 as-number 64514 \n peer 10.0.5.5 ebgp-max-hop 2 \n peer 10.0.5.5 connect-interface LoopBack0 \n ipv4-family unicast \n  undo synchronization \n  peer 10.0.2.2 enable \n  peer 10.0.2.2 next-hop-local \n  peer 10.0.3.3 enable \n  peer 10.0.3.3 next-hop-local \n  peer 10.0.5.5 enable \nospf 1 router-id 10.0.4.4 \n area 0.0.0.0 \n  network 10.0.4.4 0.0.0.0 \n  network 10.0.34.4 0.0.0.0 \nip route-static 10.0.5.5 255.255.255.255 10.0.45.5",
    "R5": "sysname R5 \ninterface GigabitEthernet0/0/3 \n ip address 10.0.45.5 255.255.255.0 \ninterface LoopBack0 \n ip address 10.0.5.5 255.255.255.255 \ninterface LoopBack1 \n ip address 10.1.5.5 255.255.255.0 \nbgp 64514 \n router-id 10.0.5.5 \n peer 10.0.4.4 as-number 64512 \n peer 10.0.4.4 ebgp-max-hop 2 \n peer 10.0.4.4 connect-interface LoopBack0 \n ipv4-family unicast \n  undo synchronization \n  network 10.1.5.0 255.255.255.0 \n  peer 10.0.4.4 enable \nip route-static 10.0.4.4 255.255.255.255 10.0.45.4"
  }
}