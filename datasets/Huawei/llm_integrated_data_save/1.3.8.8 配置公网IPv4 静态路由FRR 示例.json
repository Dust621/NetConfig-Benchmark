{
  "topology": "基于网络拓扑图分析，增强后的网络拓扑描述如下：\n\n**网络拓扑结构：**\n该网络采用冗余环形拓扑结构，由四台路由器设备组成：Device T、Device A、Device B和Device C。\n\n**设备连接关系：**\n- Device T通过interface2(GE2/0/0, IP: 192.168.10.1/24)连接Device A的interface1(IP: 192.168.10.2/24)，形成Link A主链路\n- Device T通过interface3(GE3/0/0, IP: 192.168.20.1/24)连接Device B的interface1(IP: 192.168.20.2/24)，形成Link B备份链路\n- Device A通过interface2(IP: 192.168.11.2/24)连接Device C的interface2(IP: 192.168.11.1/24)\n- Device B通过interface2(IP: 192.168.21.2/24)连接Device C的interface3(IP: 192.168.21.1/24)\n- Device T通过interface1(GE1/0/0, IP: 192.168.2.2/24)连接外部网络\n\n**IP地址分配：**\n- Device T: interface1(172.16.1.1/24)、interface2(192.168.10.1/24)、interface3(192.168.20.1/24)\n- Device A: interface1(192.168.10.2/24)、interface2(192.168.11.2/24)\n- Device B: interface1(192.168.20.2/24)、interface2(192.168.21.2/24)\n- Device C: interface2(192.168.11.1/24)、interface3(192.168.21.1/24)\n\n**路由配置需求：**\n在Device T上配置两条静态路由，下一跳分别为Device A(192.168.10.2)和Device B(192.168.20.2)，通过路由优先级设置实现Link A为主路径，Link B为备份路径的主备切换机制。",
  "requirement": "在DeviceT上配置下一跳分别为DeviceA和DeviceB的两条IPv4静态路由，使链路B为链路A的备份。当链路A出现故障时，流量可以快速切换到链路B上。",
  "steps": [
    "在DeviceT上配置下一跳分别为DeviceA和DeviceB的两条IPv4静态路由。",
    "在DeviceT上为链路A配置较低的Preference值，使系统优选链路A。",
    "在DeviceT上使能IPv4静态路由FRR功能，查看备份出接口和备份下一跳的信息。",
    "配置静态BFD for IPv4静态路由，以达到快速检测故障的目的。",
    "IPv4静态路由FRR去使能后，查看备份出接口和备份下一跳的信息。"
  ],
  "configs": {
    "DeviceT": "#\nsysname DeviceT\n#\nbfd\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 172.16.1.1 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.10.1 255.255.255.0\n#\ninterface GigabitEthernet3/0/0\n undo shutdown\n ip address 192.168.20.1 255.255.255.0\n#\nbfd aa bind peer-ip 192.168.11.1 source-ip 192.168.10.1\n discriminator local 1\n discriminator remote 2\n#\nip route-static frr\nip route-static 172.17.1.0 24 GigabitEthernet2/0/0 192.168.10.2 preference 40 track bfd-session aa\nip route-static 172.17.1.0 24 GigabitEthernet3/0/0 192.168.20.2\nip route-static 192.168.11.0 24 GigabitEthernet2/0/0 192.168.10.2\nip route-static 192.168.21.0 24 GigabitEthernet3/0/0 192.168.20.2\n#\nreturn",
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 192.168.10.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.11.2 255.255.255.0\n#\nip route-static 172.16.1.0 24 GigabitEthernet1/0/0 192.168.10.1\nip route-static 172.17.1.0 24 GigabitEthernet2/0/0 192.168.11.1\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 192.168.20.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.21.2 255.255.255.0\n#\nip route-static 172.16.1.0 24 GigabitEthernet1/0/0 192.168.20.1\nip route-static 172.17.1.0 24 GigabitEthernet2/0/0 192.168.21.1\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\nbfd\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 172.17.1.0 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.11.1 255.255.255.0\n#\ninterface GigabitEthernet3/0/0\n undo shutdown\n ip address 192.168.21.1 255.255.255.0\n#\nbfd ab bind peer-ip 192.168.10.1 source-ip 192.168.11.1\n discriminator local 2\n discriminator remote 1\n#\nip route-static 172.16.1.0 24 GigabitEthernet2/0/0 192.168.11.2\nip route-static 172.16.1.0 24 GigabitEthernet3/0/0 192.168.21.2\nip route-static 192.168.10.0 255.255.255.0 GigabitEthernet2/0/0 192.168.11.2\nip route-static 192.168.20.0 255.255.255.0 GigabitEthernet3/0/0 192.168.21.2\n#\nreturn"
  },
  "related_images": [
    "图1-26 配置公网IPv4静态路由FRR组网图.png"
  ],
  "topology_original": "如图1-26所示，DeviceT配置两条IPv4静态路由，分别指向DeviceA和DeviceB。DeviceA和DeviceB作为DeviceT的下一跳设备。interface1、interface2和interface3分别代表GE 1/0/0、GE 2/0/0、GE 3/0/0。"
}