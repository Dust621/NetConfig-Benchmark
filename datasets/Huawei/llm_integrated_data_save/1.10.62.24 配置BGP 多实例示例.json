{
  "topology": "根据网络拓扑图分析，增强后的网络拓扑描述如下：\n\n该网络拓扑由三台路由器设备组成，采用三角形连接架构。DeviceA通过Interface1（IP地址10.1.1.1/24）连接到DeviceB的Interface1（IP地址10.1.1.2/24），两设备间运行BGP 100基本实例，建立公网IBGP邻居关系，用于承载公网IPv4单播路由。\n\nDeviceB通过Interface2（IP地址10.1.2.2/24）连接到DeviceC的Interface2（IP地址10.1.2.3/24）。DeviceB在此连接上运行BGP 200多实例（instance aa），而DeviceC运行BGP 200基本实例，两者建立私网IBGP邻居关系，专门用于承载私网路由。\n\nDeviceA通过Interface2（IP地址10.1.3.1/24）直接连接到DeviceC的Interface1（IP地址10.1.3.3/24），同样运行BGP 200实例。\n\n整个网络实现了BGP路由的分层管理：BGP 100实例处理公网路由传递，BGP 200实例处理私网路由传递，通过不同的BGP实例实现公私网路由的隔离和独立管理维护。",
  "requirement": "在DeviceA和DeviceB之间的BGP基本实例下部署公网BGP-IPv4单播地址族视图，建立公网IBGP邻居，用于承载公网路由。在DeviceB的BGP多实例和DeviceC的基本实例下部署私网地址族，建立私网IBGP邻居，用于承载私网路由。这样可以实现路由的分开管理和维护。",
  "steps": [
    "在DeviceA和DeviceB之间BGP基本实例下部署公网BGP-IPv4单播地址族视图，建立公网IBGP邻居。",
    "在DeviceB的BGP多实例和DeviceC的基本实例下部署私网地址族，建立私网IBGP邻居。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.1 255.255.255.0\n#\nbgp 100\n peer 10.1.1.2 as-number 100\n ipv4-family unicast\n  undo synchronization\n  import-route static\n  peer 10.1.1.2 enable\n#\nip route-static 192.168.1.1 255.255.255.255 NULL0\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\nip vpn-instance vpn1\n ipv4-family\n  route-distinguisher 100:1\n  apply-label per-instance\n  vpn-target 100:1 export-extcommunity\n  vpn-target 100:1 import-extcommunity\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip binding vpn-instance vpn1\n ip address 10.1.2.2 255.255.255.0\n#\nbgp 100\n peer 10.1.1.1 as-number 100\n ipv4-family unicast\n  undo synchronization\n  peer 10.1.1.1 enable\n#\nbgp 200 instance vpn1\n ipv4-family vpn-instance vpn1\n  peer 10.1.2.3 as-number 200\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\nip vpn-instance vpn1\n ipv4-family\n  route-distinguisher 100:1\n  apply-label per-instance\n  vpn-target 100:1 export-extcommunity\n  vpn-target 100:1 import-extcommunity\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip binding vpn-instance vpn1\n ip address 10.1.2.3 255.255.255.0\n#\nbgp 200\n ipv4-family unicast\n  undo synchronization\n ipv4-family vpn-instance vpn1\n  import-route static\n  peer 10.1.2.2 as-number 200\n#\nip route-static vpn-instance vpn1 192.168.3.3 255.255.255.255 NULL0\n#\nreturn"
  },
  "related_images": [
    "图1-166 BGP 多实例组网.png"
  ],
  "topology_original": "DeviceA 和 DeviceB 之间通过 GE1/0/0 接口连接，部署公网BGP-IPv4单播地址族视图。DeviceB 和 DeviceC 之间通过 GE2/0/0 接口连接，部署私网地址族。"
}