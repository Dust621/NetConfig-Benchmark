{
  "topology": "基于网络拓扑图分析，增强后的网络拓扑描述如下：\n\n**网络拓扑详细描述：**\n\n1. **设备组成**：网络由6台路由器组成，分别为Device A、Device B、Device B1、Device B2、Device C和Device D。\n\n2. **物理连接关系**：\n   - Device A作为核心设备，通过interface1(2001:db8:1::/64)连接Device B的interface1，通过interface2(2001:db8:2::/64)连接Device C的interface1\n   - Device B通过interface2(2001:db8:3::/64)连接Device B1的interface1\n   - Device B1通过interface2(2001:db8:7::/64)连接Device D的interface2\n   - Device B通过interface3(2001:db8:4::/64)连接Device B2的interface1\n   - Device B2通过interface2(2001:db8:5::/64)连接Device D的interface3\n   - Device C通过interface2(2001:db8:6::/64)直接连接Device D的interface1\n\n3. **IP地址规划**：采用IPv6地址方案，各链路分段为/64子网：\n   - A-B链路：2001:db8:1::/64\n   - A-C链路：2001:db8:2::/64\n   - B-B1链路：2001:db8:3::/64\n   - B-B2链路：2001:db8:4::/64\n   - B2-D链路：2001:db8:5::/64\n   - C-D链路：2001:db8:6::/64\n   - B1-D链路：2001:db8:7::/64\n\n4. **业务路径设计**：\n   - 主用路径：Device A → Device B → Device B1 → Device D（经由2001:db8:1::/64、2001:db8:3::/64、2001:db8:7::/64）\n   - 备用路径1：Device A → Device B → Device B2 → Device D（经由2001:db8:1::/64、2001:db8:4::/64、2001:db8:5::/64）\n   - 备用路径2：Device A → Device C → Device D（经由2001:db8:2::/64、2001:db8:6::/64）\n\n5. **冗余架构**：Device A与下游设备间采用双路径设计，通过Device B（主用）和Device C（备用）实现冗余；Device B到Device D间通过Device B1和Device B2提供双链路冗余，确保网络高可用性。",
  "requirement": "配置NQA Group for IPv6静态路由可以利用NQA Group关联多个NQA测试例实现对多条链路的检测，快速检测到网络的故障，控制IPv6静态路由的发布，实现业务切换。正常情况下，业务流量走主用链路DeviceB→DeviceD；当主用链路出现故障后，业务流量切换到备用链路DeviceC→DeviceD。",
  "steps": [
    "创建ICMP类型的NQA测试例：用来检测主用链路的故障。",
    "创建NQA Group：该NQA Group绑定已经创建的两个ICMP类型的NQA测试例。",
    "配置静态路由：在主用链路上绑定NQA Group。",
    "配置BGP路由协议：在DeviceA、DeviceB和DeviceC上配置BGP路由协议，使这些设备之间可以相互学习路由。",
    "BGP协议引入IPv6静态路由，并为主用链路设置较高的协议首选值。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\nrouter id 1.1.1.1\n#\ninterface LoopBack0\n ipv6 enable\n ipv6 address 1::1/128\n#\ninterface GigabitEthernet1/0/0\n ipv6 enable\n ipv6 address 2001:DB8:1::1/64\n#\ninterface GigabitEthernet1/0/1\n ipv6 enable\n ipv6 address 2001:DB8:2::1/64\n#\nbgp 100\n peer 2::2 as-number 100\n peer 2::2 connect-interface LoopBack0\n peer 3::3 as-number 100\n peer 3::3 connect-interface LoopBack0\n # ipv6-family unicast\n  undo synchronization\n  peer 2::2 enable\n  peer 3::3 enable\n# ipv6 route-static 2::2 128 GigabitEthernet1/0/0 2001:DB8:1::2\n# ipv6 route-static 3::3 128 GigabitEthernet1/0/1 2001:DB8:2::2\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\nrouter id 2.2.2.2\n#\ninterface LoopBack0\n ipv6 enable\n ipv6 address 2::2/128\n#\ninterface GigabitEthernet1/0/0\n ipv6 enable\n ipv6 address 2001:DB8:1::2/64\n#\ninterface GigabitEthernet1/0/1\n ipv6 enable\n ipv6 address 2001:DB8:3::1/64\n#\ninterface GigabitEthernet1/0/2\n ipv6 enable\n ipv6 address 2001:DB8:4::1/64\n#\nbgp 100\n peer 1::1 as-number 100\n peer 1::1 connect-interface LoopBack0\n # ipv6-family unicast\n  import-route static\n  peer 1::1 preferred-value 200\n# ipv6 route-static :: 128 NULL0 track nqa-group group1\n# ipv6 route-static 1::1 128 GigabitEthernet1/0/0 2001:DB8:1::1\n#\nnqa test-instance user1 test1\n test-type icmp\n destination-address ipv6 2001:DB8:3::\n interval seconds 5\n timeout 4\n probe-count 3\n frequency 10\n start now\n#\nnqa test-instance user2 test2\n test-type icmp\n destination-address ipv6 2001:DB8:4::\n interval seconds 5\n timeout 4\n probe-count 3\n frequency 10\n start now\n#\nnqa group group1\n nqa test-instance user1 test1\n nqa test-instance user2 test2\n operator or\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\nrouter id 3.3.3.3\n#\ninterface LoopBack0\n ipv6 enable\n ipv6 address 3::3/128\n#\ninterface GigabitEthernet1/0/0\n ipv6 enable\n ipv6 address 2001:DB8:6::1/64\n#\ninterface GigabitEthernet1/0/1\n ipv6 enable\n ipv6 address 2001:DB8:2::2/64\n#\nbgp 100\n peer 1::1 as-number 100\n peer 1::1 connect-interface LoopBack0\n # ipv6-family unicast\n  import-route static\n  peer 1::1 preferred-value 100\n# ipv6 route-static :: 128 NULL0\n# ipv6 route-static 1::1 128 GigabitEthernet1/0/1 2001:DB8:2::1\n#\nreturn"
  },
  "related_images": [
    "图1-34 NQA Group for IPv6 静态路由实现组网图.png"
  ],
  "topology_original": "DeviceA分别与DeviceB、DeviceC建立BGP邻居；DeviceB与DeviceD之间分别通过DeviceB1和DeviceB2有两条链路连接；DeviceB为主用设备，DeviceC为备用设备。"
}