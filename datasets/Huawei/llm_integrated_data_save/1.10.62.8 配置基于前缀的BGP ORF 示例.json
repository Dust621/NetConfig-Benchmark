{
  "topology": "DeviceA和DeviceB属于AS100，DeviceC、DeviceD和DeviceE属于AS200。DeviceA需要DeviceC只发送符合DeviceA入口策略的路由，DeviceC不想单独为DeviceA维护一个出口策略。",
  "requirement": "配置基于前缀的BGP ORF，使DeviceA能够控制DeviceC发送的路由，而无需DeviceC单独维护出口策略。",
  "steps": [
    "建立BGP邻居：在DeviceA和DeviceC之间建立EBGP邻居，在DeviceA和DeviceB之间建立IBGP邻居，在DeviceC和DeviceD、DeviceC和DeviceE之间建立IBGP邻居。",
    "配置入口过滤和ORF能力：在DeviceA上应用基于前缀的入口过滤，在DeviceA和DeviceC上分别使能基于前缀的BGP ORF能力。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet2/0/0\n ip address 10.2.1.2 255.255.255.252\n#\ninterface GigabitEthernet1/0/0\n ip address 10.1.1.1 255.255.255.252\n#\ninterface LoopBack1\n ip address 1.1.1.1 255.255.255.255\n#\nbgp 100\n router-id 1.1.1.1\n peer 10.1.1.2 as-number 200\n peer 10.2.1.1 as-number 100\n # ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 10.1.1.2 enable\n  peer 10.1.1.2 ip-prefix 1 import\n  peer 10.1.1.2 capability-advertise orf ip-prefix both\n  peer 10.2.1.1 enable\n#\nip ip-prefix 1 index 10 permit 10.3.1.0 24 greater-equal 24 less-equal 32\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\ninterface GigabitEthernet1/0/0\n ip address 10.2.1.1 255.255.255.252\n#\ninterface LoopBack1\n ip address 2.2.2.2 255.255.255.255\n#\nbgp 100\n router-id 2.2.2.2\n peer 10.2.1.2 as-number 100\n # ipv4-family unicast\n  undo synchronization\n  peer 10.2.1.2 enable\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\ninterface GigabitEthernet2/0/0\n ip address 10.3.1.2 255.255.255.252\n#\ninterface GigabitEthernet1/0/0\n ip address 10.1.1.2 255.255.255.252\n#\ninterface GigabitEthernet3/0/0\n ip address 10.4.1.2 255.255.255.252\n#\ninterface LoopBack1\n ip address 3.3.3.3 255.255.255.255\n#\nbgp 200\n router-id 3.3.3.3\n peer 10.1.1.1 as-number 100\n peer 10.3.1.1 as-number 200\n peer 10.4.1.1 as-number 200\n # ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 10.1.1.1 enable\n  peer 10.1.1.1 capability-advertise orf ip-prefix both\n  peer 10.3.1.1 enable\n  peer 10.4.1.1 enable\n#\nreturn",
    "DeviceD": "#\nsysname DeviceD\n#\ninterface GigabitEthernet1/0/0\n ip address 10.3.1.1 255.255.255.252\n#\ninterface LoopBack1\n ip address 4.4.4.4 255.255.255.255\n#\nbgp 200\n router-id 4.4.4.4\n peer 10.3.1.2 as-number 200\n # ipv4-family unicast\n  undo synchronization\n  peer 10.3.1.2 enable\n#\nreturn",
    "DeviceE": "#\nsysname DeviceE\n#\ninterface GigabitEthernet1/0/1\n ip address 10.4.1.1 255.255.255.252\n#\ninterface LoopBack1\n ip address 5.5.5.5 255.255.255.255\n#\nbgp 200\n router-id 5.5.5.5\n peer 10.4.1.2 as-number 200\n # ipv4-family unicast\n  undo synchronization\n  peer 10.4.1.2 enable\n#\nreturn"
  },
  "related_images": [
    "图1-150 配置基于前缀的BGP ORF组网图.png"
  ]
}