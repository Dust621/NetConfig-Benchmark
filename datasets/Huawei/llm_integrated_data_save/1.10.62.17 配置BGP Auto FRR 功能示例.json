{
  "topology": "根据网络拓扑图，增强的网络拓扑描述如下：\n\n**网络拓扑结构：**\n\nDeviceA位于AS100内，作为边界路由器，配置两个接口：\n- interface1: 10.1.1.1/24，连接DeviceB\n- interface2: 10.2.1.1/24，连接DeviceC\n\nDeviceB、DeviceC、DeviceD位于AS200内：\n\nDeviceB配置三个接口：\n- interface1: 10.1.1.2/24，连接DeviceA\n- interface2: 10.3.1.1/24，连接DeviceD\n- interface3: 10.2.1.2/24，连接DeviceC\n\nDeviceC配置三个接口：\n- interface1: 10.2.1.2/24，连接DeviceA  \n- interface2: 10.4.1.1/24，连接DeviceD\n- interface3: 10.2.1.2/24，连接DeviceB\n\nDeviceD配置三个接口：\n- interface1: 10.3.1.2/24，连接DeviceB\n- interface2: 10.4.1.2/24，连接DeviceC\n- interface3: 14.4.4.4/32，为环回接口\n\n**BGP连接关系：**\n- DeviceA与DeviceB之间配置EBGP邻居关系（AS100-AS200）\n- DeviceA与DeviceC之间配置EBGP邻居关系（AS100-AS200）\n- DeviceD与DeviceB之间配置IBGP邻居关系（AS200内部）\n- DeviceD与DeviceC之间配置IBGP邻居关系（AS200内部）\n\n**冗余路径设计：**\nDeviceA到DeviceD存在两条路径：\n- 主路径：DeviceA → DeviceB → DeviceD\n- 备用路径：DeviceA → DeviceC → DeviceD\n\n通过BGP Auto FRR功能实现主备路径快速切换，当主链路故障时可达到亚秒级切换时间。",
  "requirement": "通过配置BGP Auto FRR功能，使得DeviceA到DeviceD的路由有备份转发信息，提高网络可靠性。当主链路出现故障的时候，系统快速将转发路径切换到备份链路上，业务中断时间非常短，可以达到亚秒级。",
  "steps": [
    "DeviceA与DeviceB和DeviceC之间配置EBGP连接。DeviceD与DeviceB和DeviceC之间配置IBGP连接。",
    "在DeviceB、DeviceC上配置路由策略，改变到DeviceD的路由MED值，以便优选路由。",
    "在DeviceA上配置BGP Auto FRR功能。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet3/0/1\n undo shutdown\n ip address 172.16.3.1 255.255.255.0\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 172.16.2.1 255.255.255.0\n#\ninterface GigabitEthernet1/0/2\n undo shutdown\n ip address 172.16.1.1 255.255.255.0\n#\nbgp router-id 1.1.1.1\n peer 172.16.2.2 as-number 65005\n#\n ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 172.16.2.2 enable\n  peer 172.16.2.2 capability-advertise add-path receive\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\ninterface GigabitEthernet3/0/1\n undo shutdown\n ip address 172.16.3.2 255.255.255.0\n#\ninterface GigabitEthernet3/0/2\n undo shutdown\n ip address 172.16.7.1 255.255.255.0\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 172.16.5.2 255.255.255.0\n#\nbgp router-id 2.2.2.2\n peer 172.16.5.1 as-number 65005\n peer 172.16.7.2 as-number 65004\n#\n ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 172.16.5.1 enable\n  peer 172.16.7.2 enable\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\ninterface GigabitEthernet3/0/1\n undo shutdown\n ip address 172.16.6.1 255.255.255.0\n#\ninterface GigabitEthernet3/0/2\n undo shutdown\n ip address 172.16.4.2 255.255.255.0\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 172.16.1.2 255.255.255.0\n#\nbgp router-id 3.3.3.3\n peer 172.16.4.1 as-number 65005\n peer 172.16.6.2 as-number 65004\n#\n ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 172.16.4.1 enable\n  peer 172.16.6.2 enable\n#\nreturn",
    "DeviceD": "#\nsysname DeviceD\n#\ninterface GigabitEthernet3/0/1\n undo shutdown\n ip address 172.16.6.2 255.255.255.0\n#\ninterface GigabitEthernet3/0/2\n undo shutdown\n ip address 172.16.7.2 255.255.255.0\n#\ninterface LoopBack1\n ip address 1.1.1.1 255.255.255.255\n#\nbgp router-id 4.4.4.4\n peer 172.16.6.1 as-number 65003\n peer 172.16.7.1 as-number 65002\n#\n ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 172.16.6.1 enable\n  peer 172.16.7.1 enable\n#\nreturn",
    "RR": "#\nsysname RR\n#\ninterface GigabitEthernet3/0/1\n undo shutdown\n ip address 172.16.4.1 255.255.255.0\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 172.16.2.2 255.255.255.0\n#\ninterface GigabitEthernet1/0/2\n undo shutdown\n ip address 172.16.5.1 255.255.255.0\n#\nbgp router-id 5.5.5.5\n peer 172.16.2.1 as-number 65001\n peer 172.16.4.2 as-number 65003\n peer 172.16.5.2 as-number 65002\n#\n ipv4-family unicast\n  undo synchronization\n  import-route direct\n  bestroute add-path path-number 2\n  peer 172.16.2.1 enable\n  peer 172.16.2.1 reflect-client\n  peer 172.16.2.1 capability-advertise add-path send\n  peer 172.16.2.1 advertise add-path path-number 2\n  peer 172.16.4.2 enable\n  peer 172.16.4.2 reflect-client\n  peer 172.16.5.2 enable\n  peer 172.16.5.2 reflect-client\n#\nreturn"
  },
  "related_images": [
    "图1-159 配置BGP Auto FRR 组网图.png"
  ],
  "topology_original": "DeviceA位于AS100内，DeviceB、DeviceC、DeviceD位于AS内。DeviceA与DeviceB和DeviceC之间配置EBGP连接，DeviceD与DeviceB和DeviceC之间配置IBGP连接。"
}