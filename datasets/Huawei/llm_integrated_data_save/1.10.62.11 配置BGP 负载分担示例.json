{
  "topology": "根据网络拓扑图，增强后的网络拓扑描述如下：\n\n**网络拓扑结构：**\n该网络由4台路由器组成，分布在3个不同的自治系统（AS）中：\n- DeviceA：位于AS100，作为上游路由器\n- DeviceB和DeviceC：位于AS300，形成IBGP对等体关系\n- DeviceD：位于AS200，作为目标网络宿主\n\n**物理连接关系：**\n- DeviceA通过interface1（10.1.1.1/24）连接DeviceB的interface1（10.1.1.2/24）\n- DeviceA通过interface2（10.1.2.1/24）连接DeviceC的interface2（10.1.2.2/24）\n- DeviceB通过interface2（10.1.3.2/24）连接DeviceD的interface2（10.1.3.1/24）\n- DeviceC通过interface1（10.1.4.2/24）连接DeviceD的interface1（10.1.4.1/24）\n\n**BGP配置：**\n- AS100与AS300之间建立EBGP邻居关系（DeviceA-DeviceB和DeviceA-DeviceC）\n- AS300与AS200之间建立EBGP邻居关系（DeviceB-DeviceD和DeviceC-DeviceD）\n- AS300内部DeviceB和DeviceC之间需要建立IBGP邻居关系以同步路由信息\n\n**目标网络：**\nDeviceD宿主目标网络172.16.1.0/24，通过interface3进行宣告\n\n**负载分担需求：**\nDeviceA到达172.16.1.0/24存在两条等价路径：\n- 路径1：DeviceA → DeviceB → DeviceD\n- 路径2：DeviceA → DeviceC → DeviceD\n\n通过配置BGP多路径负载分担，实现流量在两条路径间的均衡分配。",
  "requirement": "在DeviceA上存在两条到达相同目的地址172.16.1.0/24的BGP路由。如果有流量要到达172.16.1.0/24，则既可以通过DeviceB到达，也可以通过DeviceC到达。通过配置BGP负载分担可以实现减少网络拥塞，充分利用网络资源。",
  "steps": [
    "在DeviceA和DeviceB、DeviceA和DeviceC之间配置EBGP连接。",
    "在DeviceD和DeviceB、DeviceD和DeviceC之间配置EBGP连接。",
    "在DeviceA上配置负载分担功能，查看路由信息。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.1 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.2.1 255.255.255.0\n#\nbgp 100\n router-id 1.1.1.1\n peer 10.1.1.2 as-number 300\n peer 10.1.2.2 as-number 300\n #\n ipv4-family unicast\n  maximum load-balancing 2\n  peer 10.1.1.2 enable\n  peer 10.1.2.2 enable\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.3.2 255.255.255.0\n#\nbgp 300\n router-id 2.2.2.2\n peer 10.1.1.1 as-number 100\n peer 10.1.3.1 as-number 200\n #\n ipv4-family unicast\n  undo synchronization\n  peer 10.1.1.1 enable\n  peer 10.1.3.1 enable\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.4.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.2.2 255.255.255.0\n#\nbgp 300\n router-id 3.3.3.3\n peer 10.1.2.1 as-number 100\n peer 10.1.4.1 as-number 200\n #\n ipv4-family unicast\n  undo synchronization\n  peer 10.1.2.1 enable\n  peer 10.1.4.1 enable\n#\nreturn",
    "DeviceD": "#\nsysname DeviceD\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.4.1 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.3.1 255.255.255.0\n#\ninterface GigabitEthernet3/0/0\n undo shutdown\n ip address 172.16.1.1 255.255.255.0\n#\nbgp 200\n router-id 4.4.4.4\n peer 10.1.3.2 as-number 300\n peer 10.1.4.2 as-number 300\n #\n ipv4-family unicast\n  undo synchronization\n  network 172.16.1.0 255.255.255.0\n  peer 10.1.3.2 enable\n  peer 10.1.4.2 enable\n#\nreturn"
  },
  "related_images": [
    "图1-153 配置BGP 负载分担组网图.png"
  ],
  "topology_original": "组网需求如图1-153所示，所有路由器都配置BGP。DeviceA在AS100中，DeviceB和DeviceC在AS300中，DeviceD在AS200中。DeviceA与DeviceB、DeviceC之间运行EBGP，DeviceD与DeviceB、DeviceC之间运行EBGP。"
}