{
  "topology": "AS200被划分为3个子自治系统：AS65001、AS65002和AS65003。AS65001内的DeviceA、DeviceD和DeviceE建立IBGP全连接关系。AS65001通过配置联盟EBGP多等体关系与AS65002、AS65003建立连接。AS100和AS200之间通过DeviceA和DeviceF建立EBGP连接。",
  "requirement": "在一个区域内实现IBGP全连接，由于设备数量较多导致IBGP连接数量过多，运维成本高。通过部署BGP联盟功能，将AS200划分为3个子自治系统，减少IBGP的连接数量，降低运维成本。",
  "steps": [
    "在AS200中各路由器上配置BGP联盟。",
    "在AS65001中配置IBGP连接。",
    "在AS100和AS200之间配置EBGP连接，查看路由信息。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.216.1.1 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.1.1 255.255.255.0\n#\ninterface GigabitEthernet3/0/0\n undo shutdown\n ip address 10.1.2.1 255.255.255.0\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 10.1.3.1 255.255.255.0\n#\ninterface GigabitEthernet1/0/2\n undo shutdown\n ip address 10.1.4.1 255.255.255.0\n#\nbgp router-id 1.1.1.1\n confederation id 200\n confederation peer-as 65002\n peer 10.1.1.2 as-number 65002\n peer 10.1.2.2 as-number 65003\n peer 10.1.3.2 as-number 65001\n peer 10.1.4.2 as-number 65001\n peer 10.216.1.2 as-number 100\n#\n ipv4-family unicast\n undo synchronization\n peer 10.216.1.2 enable\n peer 10.1.1.2 enable\n peer 10.1.1.2 next-hop-local\n peer 10.1.2.2 enable\n peer 10.1.2.2 next-hop-local\n peer 10.1.3.2 enable\n peer 10.1.3.2 next-hop-local\n peer 10.1.4.2 enable\n peer 10.1.4.2 next-hop-local\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.2 255.255.255.0\n#\nbgp router-id 2.2.2.2\n confederation id 200\n confederation peer-as 65001\n peer 10.1.1.1 as-number 65001\n#\n ipv4-family unicast\n undo synchronization\n peer 10.1.1.1 enable\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.2.2 255.255.255.0\n#\nbgp router-id 3.3.3.3\n confederation id 200\n confederation peer-as 65001\n peer 10.1.2.1 as-number 65001\n#\n ipv4-family unicast\n undo synchronization\n peer 10.1.2.1 enable\n#\nreturn",
    "DeviceD": "#\nsysname DeviceD\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.3.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.5.1 255.255.255.0\n#\nbgp router-id 4.4.4.4\n confederation id 200\n peer 10.1.3.1 as-number 65001\n peer 10.1.5.2 as-number 65001\n#\n ipv4-family unicast\n undo synchronization\n peer 10.1.3.1 enable\n peer 10.1.5.2 enable\n#\nreturn",
    "DeviceE": "#\nsysname DeviceE\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.3.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.5.2 255.255.255.0\n#\nbgp router-id 5.5.5.5\n confederation id 200\n peer 10.1.4.1 as-number 65001\n peer 10.1.5.1 as-number 65001\n#\n ipv4-family unicast\n undo synchronization\n peer 10.1.4.1 enable\n peer 10.1.5.1 enable\n#\nreturn",
    "DeviceF": "#\nsysname DeviceF\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.216.1.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.1.1 255.255.255.0\n#\nbgp router-id 6.6.6.6\n peer 10.216.1.1 as-number 200\n#\n ipv4-family unicast\n undo synchronization\n network 192.168.1.0 255.255.255.0\n peer 10.216.1.1 enable\n#\nreturn"
  },
  "related_images": [
    "图1-148 配置BGP 联盟示例组网图.png"
  ]
}