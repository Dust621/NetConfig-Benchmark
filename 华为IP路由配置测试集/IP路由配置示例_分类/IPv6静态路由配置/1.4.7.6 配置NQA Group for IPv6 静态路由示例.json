{
  "topology": "该网络拓扑采用冗余架构设计，包含6台设备：Device A作为核心设备，Device B和Device C作为汇聚层设备，Device B1、Device B2和Device D作为接入层设备。\n\n**物理连接关系：**\n- Device A通过interface1(2001:db8:1::1/64)连接Device B的interface1(2001:db8:1::2/64)\n- Device A通过interface2(2001:db8:2::1/64)连接Device C的interface1(2001:db8:2::2/64)  \n- Device B通过interface2(2001:db8:3::1/64)连接Device B1的interface1(2001:db8:3::2/64)\n- Device B通过interface3(2001:db8:4::1/64)连接Device B2的interface1(2001:db8:4::2/64)\n- Device B1通过interface2(2001:db8:7::1/64)连接Device D的interface2(2001:db8:7::2/64)\n- Device B2通过interface2(2001:db8:5::1/64)连接Device D的interface1(2001:db8:5::2/64)\n- Device C通过interface2(2001:db8:6::1/64)连接Device D的interface3(2001:db8:6::2/64)\n\n**网络分段：**\n- 核心-汇聚段：2001:db8:1::/64、2001:db8:2::/64\n- 汇聚-接入段：2001:db8:3::/64、2001:db8:4::/64、2001:db8:6::/64  \n- 接入-目标段：2001:db8:5::/64、2001:db8:7::/64\n\n**协议配置：**\n- AS 100内部BGP配置：Device A(RID 1.1.1.1)与Device B(RID 2.2.2.2)、Device C(RID 3.3.3.3)建立IBGP邻居关系\n- Device B配置NQA Group检测主用双链路(通过B1和B2到达Device D)\n- Device B具有更高的BGP Preferred-Value(200)作为主用路径，Device C的Preferred-Value(100)作为备用路径\n- 通过IPv6静态路由和NQA Group实现链路状态检测和自动故障切换",
  "requirement": "配置NQA Group for IPv6静态路由可以利用NQA Group关联多个NQA测试例实现对多条链路的检测，快速检测到网络的故障，控制IPv6静态路由的发布，实现业务切换。正常情况下，业务流量走主用链路DeviceB→DeviceD；当主用链路出现故障后，业务流量切换到备用链路DeviceC→DeviceD。",
  "steps": [
    "创建ICMP类型的NQA测试例：用来检测主用链路的故障。",
    "创建NQA Group：该NQA Group绑定已经创建的两个ICMP类型的NQA测试例。",
    "配置静态路由：在主用链路上绑定NQA Group。",
    "配置BGP路由协议：在DeviceA、DeviceB和DeviceC上配置BGP路由协议，使这些设备之间可以相互学习路由。",
    "BGP协议引入IPv6静态路由，并为主用链路设置较高的协议首选值。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\nrouter id 1.1.1.1\n#\ninterface LoopBack0\n ipv6 enable\n ipv6 address 1::1/128\n#\ninterface GigabitEthernet1/0/0\n ipv6 enable\n ipv6 address 2001:DB8:1::1/64\n#\ninterface GigabitEthernet1/0/1\n ipv6 enable\n ipv6 address 2001:DB8:2::1/64\n#\nbgp 100\n peer 2::2 as-number 100\n peer 2::2 connect-interface LoopBack0\n peer 3::3 as-number 100\n peer 3::3 connect-interface LoopBack0\n # ipv6-family unicast\n  undo synchronization\n  peer 2::2 enable\n  peer 3::3 enable\n# ipv6 route-static 2::2 128 GigabitEthernet1/0/0 2001:DB8:1::2\n# ipv6 route-static 3::3 128 GigabitEthernet1/0/1 2001:DB8:2::2\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\nrouter id 2.2.2.2\n#\ninterface LoopBack0\n ipv6 enable\n ipv6 address 2::2/128\n#\ninterface GigabitEthernet1/0/0\n ipv6 enable\n ipv6 address 2001:DB8:1::2/64\n#\ninterface GigabitEthernet1/0/1\n ipv6 enable\n ipv6 address 2001:DB8:3::1/64\n#\ninterface GigabitEthernet1/0/2\n ipv6 enable\n ipv6 address 2001:DB8:4::1/64\n#\nbgp 100\n peer 1::1 as-number 100\n peer 1::1 connect-interface LoopBack0\n # ipv6-family unicast\n  import-route static\n  peer 1::1 preferred-value 200\n# ipv6 route-static :: 128 NULL0 track nqa-group group1\n# ipv6 route-static 1::1 128 GigabitEthernet1/0/0 2001:DB8:1::1\n#\nnqa test-instance user1 test1\n test-type icmp\n destination-address ipv6 2001:DB8:3::\n interval seconds 5\n timeout 4\n probe-count 3\n frequency 10\n start now\n#\nnqa test-instance user2 test2\n test-type icmp\n destination-address ipv6 2001:DB8:4::\n interval seconds 5\n timeout 4\n probe-count 3\n frequency 10\n start now\n#\nnqa group group1\n nqa test-instance user1 test1\n nqa test-instance user2 test2\n operator or\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\nrouter id 3.3.3.3\n#\ninterface LoopBack0\n ipv6 enable\n ipv6 address 3::3/128\n#\ninterface GigabitEthernet1/0/0\n ipv6 enable\n ipv6 address 2001:DB8:6::1/64\n#\ninterface GigabitEthernet1/0/1\n ipv6 enable\n ipv6 address 2001:DB8:2::2/64\n#\nbgp 100\n peer 1::1 as-number 100\n peer 1::1 connect-interface LoopBack0\n # ipv6-family unicast\n  import-route static\n  peer 1::1 preferred-value 100\n# ipv6 route-static :: 128 NULL0\n# ipv6 route-static 1::1 128 GigabitEthernet1/0/1 2001:DB8:2::1\n#\nreturn"
  },
  "related_images": [
    "图1-34 NQA Group for IPv6 静态路由实现组网图.png"
  ]
}