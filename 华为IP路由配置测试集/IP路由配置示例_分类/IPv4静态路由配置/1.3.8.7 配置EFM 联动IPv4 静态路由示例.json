{
  "topology": "网络拓扑由两台路由器DeviceA和DeviceB组成，通过以太网链路直连。\n\n物理连接：\n- DeviceA的interface1端口连接至DeviceB的interface1端口，该链路启用EFM OAM功能\n- DeviceA的interface2端口（IP地址172.16.1.1/24）连接至DeviceB的interface2端口（IP地址172.16.1.2/24），形成172.16.1.0/24网段\n\n设备配置：\n- DeviceA：配置静态路由指向目标网络1.1.1.1/32，下一跳为172.16.1.2，出接口为interface2，该静态路由通过track机制与interface1的EFM状态联动\n- DeviceB：配置LoopBack0接口，IP地址为1.1.1.1/32，作为静态路由的目标网络\n\n协议特性：\n- 两台设备全局启用EFM功能\n- DeviceA和DeviceB的interface1接口均启用EFM OAM协议\n- 通过EFM状态联动控制静态路由的激活状态，实现基于链路状态的流量控制和路由发布",
  "requirement": "通过配置EFM联动IPv4静态路由，系统响应指定接口的EFM UP/DOWN事件，决定是否激活静态路由，由此控制路由的发布并引导远端的流量。在DeviceA上配置到达1.1.1.1/32的静态路由，该静态路由与EFM联动。",
  "steps": [
    "在DeviceA和DeviceB上开启EFM OAM功能（全局和接口下开启）。",
    "配置DeviceA到1.1.1.1/32的静态路由，EFM联动该静态路由。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\nefm enable\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n efm enable\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 172.16.1.1 255.255.255.0\n#\nip route-static 1.1.1.1 255.255.255.255 GigabitEthernet1/0/1 172.16.1.2 track efm-state GigabitEthernet1/0/0\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\nefm enable\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n efm enable\n#\ninterface GigabitEthernet1/0/1\n undo shutdown\n ip address 172.16.1.2 255.255.255.0\n#\ninterface LoopBack0\n ip address 1.1.1.1 255.255.255.255\n#\nreturn"
  },
  "related_images": [
    "图1-25 配置EFM联动IPv4静态路由组网图.png"
  ]
}